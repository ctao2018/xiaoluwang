
<link rel="stylesheet" href="front/swiper/swiper.min.css">
<script src="front/swiper/swiper.min.js"></script>
<script>
  $(function () {
    // 初始化轮播
    var mySwiper = new Swiper('.swiper-container', {
      autoplay: true,
      pagination: {
        el: '.swiper-pagination',
        bulletElement: 'li',
      },
    });
  })

  // 上拉加载html拼接方法
  function getHtmlTemp(res) {
    var _html = '<a href="'+res.link+'" class="dts-list">'+
        '<div class="dtsl-img">'+
          '<img src="'+res.pic+'" alt="">'+
        '</div>'+
        '<div class="dtsl-txt">'+res.miaoshu+'</div>'+
      '</a>';
    return _html;
  }

  $(function () {
    // 初始化上拉加载
    onReachBottom.init('.dts-list-box',function () {
      $.ajax({
        url: './front/mockdata/050detailsStrategy.json',
        type: 'GET',
        success: function (res) {
          var pages = res.pages;
          for (var i = 0; i < pages.length; i++) {
            $(".dts-list-box .show-reach-loading").before(getHtmlTemp(pages[i]))
          }
          hideReachLoading();
          onReachBottom.hasNextPage = res.hasNextPage;//获取是否有下一页数据
          onReachBottom.currPage = res.currPage;//获取当前页数
          if(!onReachBottom.hasNextPage){
            showNullReach($(".dts-list-box"))
          }
        }
      })
    })
  })
</script>